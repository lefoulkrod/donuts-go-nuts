<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Basic 3D Game</title>
    <style>
      body { margin: 0; }
      canvas { display: block; }
    </style>
    <style>
      #banner-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      #banner {
        width: 100%;
        height: 20%;
        background-color: black;
        color: white;
        font-family: "Comic Sans MS", cursive, sans-serif;
        font-size: 6vw;
        text-align: center;
        line-height: 1;
        opacity: 1;
        transition: opacity 2s;
        text-shadow:
          0px -8px 0px #ff0000, /* Red */
          3px -6px 0px #ffa500, /* Orange */
          6px -4px 0px #ffff00, /* Yellow */
          9px -2px 0px #00ff00, /* Green */
          12px 0px 0px #0000ff, /* Blue */
          9px 2px 0px #4b0082, /* Indigo */
          6px 4px 0px #ee82ee; /* Violet */
      }
    </style>
  </head>
  <body>
    <div id="banner-container">
      <div id="banner">Donuts Go Nuts</div>
    </div>
    <script>
      const banner = document.getElementById("banner");
      setTimeout(() => {
        banner.style.opacity = "0";
      }, 2000);
    </script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>

<script>

// Create the point counter at the top-right of the screen
const pointCounter = document.createElement('div');
pointCounter.style.position = 'absolute';
pointCounter.style.top = '10px';
pointCounter.style.right = '10px';
pointCounter.style.fontSize = '24px';
pointCounter.style.color = 'white'; // add this line
pointCounter.innerText = 'Points: 0';
document.body.appendChild(pointCounter);


// Initialize the point count
let points = 0;

  // Create a 2D box at the bottom of the screen
const box = document.createElement('div');
box.style.width = '200px';
box.style.height = '100px';
box.style.backgroundColor = 'white';
box.style.position = 'absolute';
box.style.bottom = '10px';
box.style.left = '50%';
box.style.transform = 'translateX(-25%)';
document.body.appendChild(box);

// Move the box with the arrow keys
const speed = 50;
document.addEventListener('keydown', (event) => {
  if (event.code === 'ArrowLeft') {
    box.style.left = `${parseFloat(box.style.left) - speed}px`;
  } else if (event.code === 'ArrowRight') {
    box.style.left = `${parseFloat(box.style.left) + speed}px`;
  }
});

// Setup

var scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 5;

const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Lighting
const ambientLight = new THREE.AmbientLight(0x404040);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
directionalLight.position.set(1, 1, 1);
scene.add(directionalLight);

// Helper function to create a sprinkle
function createSprinkle() {
  const geometry = new THREE.CylinderGeometry(0.01, 0.01, 0.1, 8);
  const material = new THREE.MeshPhongMaterial({ color: Math.random() * 0xffffff });
  const sprinkle = new THREE.Mesh(geometry, material);
  return sprinkle;
}

// Helper function to add sprinkles to a torus
function addSprinklesToTorus(torus, numSprinkles) {
  for (let i = 0; i < numSprinkles; i++) {
    const sprinkle = createSprinkle();
    const angle = Math.random() * 2 * Math.PI;
    const radius = 0.25 + 0.1 * Math.random();
    const yOffset = Math.random() * 0.1 - 0.05;
    sprinkle.position.x = radius * Math.cos(angle);
    sprinkle.position.y = yOffset;
    sprinkle.position.z = radius * Math.sin(angle);
    sprinkle.lookAt(torus.position);
    torus.add(sprinkle);
  }
}

// Update createTorus function
function createTorus() {
  const geometry = new THREE.TorusGeometry(0.25, 0.1, 16, 100);
  const material = new THREE.MeshPhongMaterial({ color: 0xFFC0CB }); // Pink color
  const torus = new THREE.Mesh(geometry, material);
  torus.position.x = Math.random() * 10 - 5; // Random X position between -5 and 5
  torus.position.y = 3; // Top of the window
  scene.add(torus);
  addSprinklesToTorus(torus, 50); // Add 50 sprinkles to the torus
  return torus;
}

const toruses = [];

// Add a new torus every 5 seconds
setInterval(() => {
  const torus = createTorus();
  toruses.push(torus);

  // Remove the torus when it goes out of the window
  torus.addEventListener('update', () => {
    if (torus.position.y < -3) {
      scene.remove(torus);
      toruses.splice(toruses.indexOf(torus), 1);
      points++; // increment the point counter
      pointCounter.innerText = `Points: ${points}`;
    }
  });
}, 5000);

// Animation loop
function animate() {
  requestAnimationFrame(animate);

  // Update torus positions and check for point scoring
  toruses.forEach((torus) => {
    torus.position.y -= 0.05;
    torus.rotation.x += 0.01;
    torus.rotation.y += 0.01;

    // Check if torus has reached the bottom of the screen and hasn't already scored a point
    if (torus.position.y < -3 && !torus.hasScored) {
      torus.hasScored = true;
      points++; // Increment the point count
    }
  });

  // Update the point counter text
  pointCounter.innerText = `Points: ${points}`;

  renderer.render(scene, camera);
}

animate();
</script>
  </body>
</html>

